<div class="p-6 w-full">
  <div class="flex items-center justify-between mb-2">
    <div class="flex items-center">
      <mat-icon [svgIcon]="'heroicons_outline:pencil-square'"></mat-icon>
      <span class="ml-2 font-semibold">Editar proyecto</span>
    </div>
    <button mat-icon-button (click)="cerrar()">
      <mat-icon [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
    </button>
  </div>

  <mat-divider class="mb-8 mt-6"></mat-divider>

  <form [formGroup]="form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <mat-form-field class="md:col-span-2" appearance="outline">
      <mat-label>Nombre del proyecto</mat-label>
      <input matInput formControlName="nombreProyecto" />
      <mat-error *ngIf="form.get('nombreProyecto')?.hasError('required')">Campo requerido</mat-error>
      <mat-error *ngIf="form.get('nombreProyecto')?.hasError('maxlength')">Máximo 150 caracteres</mat-error>
    </mat-form-field>

    <mat-form-field class="md:col-span-2" appearance="outline">
      <mat-label>Descripción</mat-label>
      <textarea matInput rows="3" formControlName="descripcion"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha de inicio</mat-label>
      <input matInput type="date" formControlName="fechaInicio" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha de fin</mat-label>
      <input matInput type="date" formControlName="fechaFin" />
    </mat-form-field>

    <mat-form-field class="md:col-span-2" appearance="outline">
      <mat-label>Estado del proyecto</mat-label>
      <mat-select formControlName="estadoId" placeholder="Selecciona un estado">
        <mat-option *ngFor="let e of estados" [value]="e.estadoId">
          {{ e.descripcion }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('estadoId')?.hasError('required')">Campo requerido</mat-error>
      <mat-hint>
        <app-tag *ngIf="estadoDescripcionActual() as texto"
                 [label]="texto"
                 [color]="estadoColor(texto)" />
      </mat-hint>
    </mat-form-field>

  </form>

  <div class="mt-4 flex justify-end gap-2">
    <button mat-stroked-button color="warn" (click)="cerrar()">Cancelar</button>
    <button mat-flat-button color="primary" (click)="guardar()" [disabled]="guardando || form.invalid">
      Guardar
    </button>
  </div>
</div>

